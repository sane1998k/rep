let buttonReport=document.querySelector(".report"),buttonGraph=document.querySelector(".graph"),buttonContacts=document.querySelector(".contacts"),actionReport=document.querySelector(".action-report"),actionGraph=document.querySelector(".action-graph"),actionContacts=document.querySelector(".action-contacts");buttonReport.addEventListener("click",(function(t){buttonReport.classList.contains("on")?actionReport.style.display="block":(actionReport.style.display="block",buttonReport.classList.add("on"),buttonContacts.classList.remove("on"),buttonGraph.classList.remove("on"),actionGraph.style.display="none",actionContacts.style.display="none")})),buttonGraph.addEventListener("click",(function(t){buttonGraph.classList.contains("on")?actionGraph.style.display="block":(buttonGraph.classList.add("on"),buttonReport.classList.remove("on"),buttonContacts.classList.remove("on"),actionGraph.style.display="block",actionReport.style.display="none",actionContacts.style.display="none")})),buttonContacts.addEventListener("click",(function(t){buttonContacts.classList.contains("on")?actionContacts.style.display="block":(buttonContacts.classList.add("on"),buttonGraph.classList.remove("on"),buttonReport.classList.remove("on"),actionContacts.style.display="block",actionReport.style.display="none",actionGraph.style.display="none")}));var tbody=$("<tbody />"),searchReport=$("#search-report");function zeroPadded(t){return t>=10?t:"0"+t}function update(){$("#DataTable").dataTable().fnClearTable();$("#DataTable").find("tbody");$.ajax({type:"POST",url:"./php/getBuild.php",dataType:"json",data:{dateTo:$("input[id=to]").val(),dateFrom:$("input[id=from]").val()},success:function(t){"ok"==t.status?""!=t.result&&$("#DataTable").dataTable().fnAddData(t.result):alert("Данные не найдены...")}})}function del(){for(var t=0;t<=400;t++){null!==(e=document.getElementById("DataTable"))&&e.parentNode.removeChild(e)}for(t=0;t<=400;t++){var e;null!==(e=document.getElementById("DataTable_wrapper"))&&e.parentNode.removeChild(e)}return!1}function drawTable(t){var e=$("<table/>");e.attr("id","DataTable"),e.addClass("dataTable");var a=$("<thead>"),n=$("<tr />");e.append(n),n.append($("<th>Д. Начала</th>")),n.append($("<th>Д. Окончания</th>")),n.append($("<th>Общее задание</th>")),n.append($("<th>Сумма доз. 1,2,3</th>")),n.append($("<th>Общая сумма</th>")),n.append($("<th>Итоговые суммы</th>")),a.append(n),e.append(a),e.append(tbody);var o=$("<tfoot />"),d=$("<tr />");d.append($("<th>Д. Начала</th>")),d.append($("<th>Д. Окончания</th>")),d.append($("<th>Общее задание</th>")),d.append($("<th>Сумма доз. 1,2,3</th>")),d.append($("<th>Общая сумма</th>")),d.append($("<th>Итоговые суммы</th>")),o.append(d),e.append(o);for(var r=0;r<t.length;r++)drawRow(t[r]);$(".action-report__table").append(e)}function drawRow(t){var e=$("<tr />");tbody.append(e),e.append($("<td>"+t[0]+"</td>")),e.append($("<td>"+t[1]+"</td>")),e.append($("<td>"+t[2]+"</td>")),e.append($("<td>"+t[3]+"</td>")),e.append($("<td>"+t[4]+"</td>")),e.append($("<td>"+t[5]+"</td>"))}function getBuild(){d=new Date;var t=d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T00:00:00",e=d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T23:59:59";$.ajax({type:"POST",url:"./php/getBuild.php",dataType:"json",data:{dateTo:e,dateFrom:t},success:function(t){"ok"==t.status?(drawTable(t.result),t.result=""):alert("Данные не найдены...")}})}function tableSearch(){for(var t=document.getElementById("search-text"),e=document.getElementById("DataTable"),a=new RegExp(t.value,"i"),n=!1,o=1;o<e.rows.length;o++){n=!1;for(var d=e.rows[o].cells.length-1;d>=0&&!(n=a.test(e.rows[o].cells[d].innerHTML));d--);e.rows[o].style.display=n?"":"none"}}$(document).ready((function(){$("input[id=from]").val(d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T00:00:00"),d=new Date;var t=d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T23:59:59";$("input[id=to]").val(t),$("#DataTable").DataTable({pageLength:10})})),getBuild(),searchReport.click((function(t){update()}));