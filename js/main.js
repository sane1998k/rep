let buttonReport=document.querySelector(".report"),buttonGraph=document.querySelector(".graph"),buttonContacts=document.querySelector(".contacts"),actionReport=document.querySelector(".action-report"),actionGraph=document.querySelector(".action-graph"),actionContacts=document.querySelector(".action-contacts");buttonReport.addEventListener("click",(function(t){buttonReport.classList.contains("on")?actionReport.style.display="block":(actionReport.style.display="block",buttonReport.classList.add("on"),buttonContacts.classList.remove("on"),buttonGraph.classList.remove("on"),actionGraph.style.display="none",actionContacts.style.display="none")})),buttonGraph.addEventListener("click",(function(t){console.log(seriesOptions),buttonGraph.classList.contains("on")?actionGraph.style.display="block":(buttonGraph.classList.add("on"),buttonReport.classList.remove("on"),buttonContacts.classList.remove("on"),actionGraph.style.display="block",actionReport.style.display="none",actionContacts.style.display="none")})),buttonContacts.addEventListener("click",(function(t){buttonContacts.classList.contains("on")?actionContacts.style.display="block":(buttonContacts.classList.add("on"),buttonGraph.classList.remove("on"),buttonReport.classList.remove("on"),actionContacts.style.display="block",actionReport.style.display="none",actionGraph.style.display="none")}));var tbody=$("<tbody />"),searchReport=$("#search-report");function zeroPadded(t){return t>=10?t:"0"+t}function update(){$("#DataTable").dataTable().fnClearTable();$("#DataTable").find("tbody");$.ajax({type:"POST",url:"./php/getBuild.php",dataType:"json",data:{dateTo:$("input[id=to]").val(),dateFrom:$("input[id=from]").val()},success:function(t){"ok"==t.status?""!=t.result&&$("#DataTable").dataTable().fnAddData(t.result):alert("Данные не найдены...")}})}function del(){for(var t=0;t<=400;t++){null!==(e=document.getElementById("DataTable"))&&e.parentNode.removeChild(e)}for(t=0;t<=400;t++){var e;null!==(e=document.getElementById("DataTable_wrapper"))&&e.parentNode.removeChild(e)}return!1}function drawTable(t){var e=$("<table/>");e.attr("id","DataTable"),e.addClass("dataTable");var a=$("<thead>"),o=$("<tr />");e.append(o),o.append($("<th>Д. Начала</th>")),o.append($("<th>Д. Окончания</th>")),o.append($("<th>Общее задание</th>")),o.append($("<th>Сумма доз. 1</th>")),o.append($("<th>Сумма доз. 2</th>")),o.append($("<th>Сумма доз. 3</th>")),o.append($("<th>Общая сумма</th>")),o.append($("<th>Итоговые суммы</th>")),a.append(o),e.append(a),e.append(tbody);var n=$("<tfoot />"),s=$("<tr />");s.append($("<th>Д. Начала</th>")),s.append($("<th>Д. Окончания</th>")),s.append($("<th>Общее задание</th>")),s.append($("<th>Сумма доз. 1</th>")),s.append($("<th>Сумма доз. 2</th>")),s.append($("<th>Сумма доз. 3</th>")),s.append($("<th>Общая сумма</th>")),s.append($("<th>Итоговые суммы</th>")),n.append(s),e.append(n);for(var r=0;r<t.length;r++)drawRow(t[r]);$(".action-report__table").append(e)}function drawRow(t){var e=$("<tr />");tbody.append(e),e.append($("<td>"+t[0]+"</td>")),e.append($("<td>"+t[1]+"</td>")),e.append($("<td>"+t[2]+"</td>")),e.append($("<td>"+t[3]+"</td>")),e.append($("<td>"+t[4]+"</td>")),e.append($("<td>"+t[5]+"</td>")),e.append($("<td>"+t[6]+"</td>")),e.append($("<td>"+t[7]+"</td>"))}function getBuild(){d=new Date;var t=d.getFullYear()+"-"+zeroPadded(d.getMonth())+"-"+zeroPadded(d.getDate())+"T00:00:00",e=d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T23:59:59";$.ajax({type:"POST",url:"./php/getBuild.php",dataType:"json",data:{dateTo:e,dateFrom:t},success:function(t){"ok"==t.status?(drawTable(t.result),t.result=""):alert("Данные не найдены...")}})}function tableSearch(){for(var t=document.getElementById("search-text"),e=document.getElementById("DataTable"),a=new RegExp(t.value,"i"),o=!1,n=1;n<e.rows.length;n++){o=!1;for(var s=e.rows[n].cells.length-1;s>=0&&!(o=a.test(e.rows[n].cells[s].innerHTML));s--);e.rows[n].style.display=o?"":"none"}}$(document).ready((function(){$("input[id=from]").val(d.getFullYear()+"-"+zeroPadded(d.getMonth())+"-"+zeroPadded(d.getDate())+"T00:00:00"),d=new Date;var t=d.getFullYear()+"-"+zeroPadded(d.getMonth()+1)+"-"+zeroPadded(d.getDate())+"T23:59:59";$("input[id=to]").val(t),$("#DataTable").DataTable({pageLength:10})})),getBuild(),searchReport.click((function(t){update()}));var seriesOptions=[],seriesCounter=0,names=["MSFT","AAPL","GOOG"];function doz1(){$.ajax({type:"POST",url:"./php/dos1.php",dataType:"json",data:{dateTo:$("input[id=to]").val(),dateFrom:$("input[id=from]").val()},success:function(t){var e;if("ok"==t.status)for(let a=0;a<t.result.length;a++)e=new Date(t.result[a][0]),t.result[a][0]=e.getTime()-6e4*e.getTimezoneOffset();else alert("Данные не найдены...")}})}function doz2(){$.ajax({type:"POST",url:"./php/dos2.php",dataType:"json",data:{dateTo:$("input[id=to]").val(),dateFrom:$("input[id=from]").val()},success:function(t){if("ok"==t.status){var e;for(let a=0;a<t.result.length;a++)e=new Date(t.result[a][0]),t.result[a][0]=e.getTime()-6e4*e.getTimezoneOffset();return t.result}alert("Данные не найдены...")}})}function doz3(){$.ajax({type:"POST",url:"./php/dos3.php",dataType:"json",data:{dateTo:$("input[id=to]").val(),dateFrom:$("input[id=from]").val()},success:function(t){if("ok"==t.status){var e;for(let a=0;a<t.result.length;a++)e=new Date(t.result[a][0]),t.result[a][0]=e.getTime()-6e4*e.getTimezoneOffset();console.log("1"+seriesOptions[0]+"2 "+seriesOptions[1]+" 3"+seriesOptions[2])}else alert("Данные не найдены...")}})}function createChart(){Highcharts.setOptions({global:{useUTC:!1},lang:{downloadPNG:"Скачать PNG",downloadJPEG:"Скачать JPEG",downloadPDF:"Скачать PDF",downloadSVG:"Скачать SVG",downloadCSV:"Скачать CSV",downloadXLS:"Скачать XLS",loading:"Загрузка...",exportButtonTitle:"Экспорт",printButtonTitle:"Печать",months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],shortMonths:["Янв","Фев","Март","Апр","Май","Июнь","Июль","Авг","Сент","Окт","Нояб","Дек"],printButtonTitle:"Imprimir Gr├ífico",resetZoom:"Limpar Zoom",weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],printChart:"Напечатать график",viewFullscreen:"Полноэкранный режим",exitFullscreen:"Выйти из полноэкранного режима",viewData:"Отобразить таблицу",hideData:"Скрыть таблицу"}}),Highcharts.stockChart("container",{credits:{text:"автоматика-м",href:'javascript:window.open("http://prom-service.org", "_blank")',target:"_blank",style:{fontSize:"15px"}},rangeSelectorZoom:"Увеличить",rangeSelector:{selected:4,buttons:[{type:"day",count:1,text:"1д"},{type:"month",count:1,text:"1м"},{type:"month",count:6,text:"6м"},{type:"year",count:1,text:"1г"},{type:"all",text:"Всё"}]},yAxis:{labels:{formatter:function(){return(this.value>0?" + ":"")+this.value+"%"}},plotLines:[{value:0,width:2,color:"silver"}]},plotOptions:{series:{compare:"percent",showInNavigator:!0}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.change}%)<br/>',valueDecimals:2,split:!0},series:seriesOptions})}function success(t){console.log(t);var e=this.url.match(/(msft|aapl|goog)/)[0].toUpperCase(),a=names.indexOf(e);seriesOptions[a]={name:a,data:t},(seriesCounter+=1)===names.length&&createChart()}$(document).ready((function(){doz1(),doz2()})),Highcharts.getJSON("./php/msft-c.php",success),Highcharts.getJSON("./php/aapl-c.php",success),Highcharts.getJSON("./php/goog-c.php",success);